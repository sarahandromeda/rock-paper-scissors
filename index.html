<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rock, Paper, Scissors</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Want to play Rock, Paper, Scissors?</h1>
    <button class="start-new">Start New Game</button>
    <div class="content">
        <div class="gameplay">
            <p>Choose Rock, Paper, or Scissors...</p>
            <input type="text" autofocus=True class="choice"><button class="submit">Shoot!</button>
            <p class="results"></p>
        </div>

        <div class="scores">
            <h3>Scores</h3>
            <table class="scores">
                <tr>
                    <th>User</th>
                    <th>Computer</th>
                </tr>
                <tr>
                    <td class="user">0</td>
                    <td class="computer">0</td>
                </tr>
            </table>
        </div>
    </div>
    <p class="game-results"></p>
    <script>
        const possChoices = ['rock', 'paper', 'scissors'];
        const startGame = document.querySelector('.start-new');
        const submitButton = document.querySelector(".submit");
        const input = document.querySelector(".choice");
        const results = document.querySelector('.results');
        const userScoreCell = document.querySelector('.user');
        const computerScoreCell = document.querySelector('.computer');
        const gameResult = document.querySelector('.game-results');
        let winner = '';
        // Create a function for computers turn
        // Create a list of possible choices
        // Generate random choice between 0-2 for choices
        // Select choice from list based on random number index
        // Return choice as computer's turn
        let computer = function() {
            let randomChoice = Math.floor(Math.random() * 3);
            let computerChoice = possChoices[randomChoice];
            return computerChoice
        };
        // Create function to take player choice
        // Convert input to lowercase to avoid errors
        // Return players choice
        let user = function() {
            let playerChoice = input.value;
            playerChoice = playerChoice.toLowerCase();
            return playerChoice;
        };
        // Create a function to complete turn
        // Set function to take computer and player choice
        // Compare choices and determine a winner
        function playTurn(user, computer) {
            console.log(computer);
            console.log(user);
            if (!(possChoices.includes(user))) {
                results.textContent = "Entry not recognized. Please enter rock, paper, scissors.";
            } else if (user == computer) {
                results.textContent = `You both played ${user}, it's a tie!`;
                winner = "tie";
            } else if (user == "rock") {
                if (computer == "paper") {
                    results.textContent = "Paper beats rock, the computer wins!";
                    winner = "computer";
                } else {
                    results.textContent = "Rock beats scissors, you win!";
                    winner = "user";
                }
            } else if (user == "paper") {
                if (computer == "rock") {
                    results.textContent = "Paper beats rock, you win!";
                    winner = "user";
                } else {
                    results.textContent = "Scissors beats paper, computer wins!";
                    winner = "computer"
                }
            } else {
                if (computer == "rock") {
                    results.textContent = "Rock beats scissors, computer wins!";
                    winner = "computer";
                } else {
                    results.textContent = "Scissors beats paper, you win!";
                    winner = "user"
                }
            }
        }
        submitButton.addEventListener("click", function() {
            playTurn(user(), computer());
        });
        input.addEventListener("keyup", function(event) {
            event.preventDefault();
            if (event.keyCode == 13) {
                submitButton.click();
            }
        });
        startGame.addEventListener('click', () => game);

        
        let totalTurns = 0;
        let computerScore = 0;
        let userScore = 0;
        // Write a function that plays 5 turns of game
        function game() {
            newGame();
            // While total count is <= 5, play turn
            while (totalTurns < 5) {
                totalTurns++;
                if (winner == "user") {
                    userScore++;
                    userScoreCell.textContent = userScore;
                } else if (winner == "computer") {
                    computerScore++;
                    computerScoreCell.textContent = computerScore;
                } else {
                    userScore++;
                    userScoreCell.textContent = userScore;
                    computerScore++;
                    computerScoreCell.textContent = computerScore;
                }
            }
            if (userScore > computerScore) {
                gameResult.textContent = "Good job, you beat the computer!";
            } else if (userScore < computerScore) {
                gameResult.textContent = "Better luck next time, Computer wins!";
            } else {
                gameResult.textContent = "It's a tie! Maybe next time!";
            }
        }

        function newGame() {
            totalTurns = 0;
            computerScore = 0;
            userScore = 0;
        }
        // Create button for new game
        // When button is clicked, reset scores and turn numbers

        // Use playTurn fucntion to play a turn and compare results
        // Add 1 to total count of turns
        // If computer wins, add 1 to computer score
        // else if user wins add 1 to user score
        // Else if total turn count > 5, compare scores and declare winner

    </script>
</body>
</html>